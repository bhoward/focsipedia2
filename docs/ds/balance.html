<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ds/balance" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Balanced Binary Search Trees | FoCSipedia</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://bhoward.github.io/focsipedia2/img/focsipedia-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://bhoward.github.io/focsipedia2/img/focsipedia-social-card.jpg"><meta data-rh="true" property="og:url" content="https://bhoward.github.io/focsipedia2/docs/ds/balance"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Balanced Binary Search Trees | FoCSipedia"><meta data-rh="true" name="description" content="As we saw in the previous section, the height of a binary tree with $N$ nodes"><meta data-rh="true" property="og:description" content="As we saw in the previous section, the height of a binary tree with $N$ nodes"><link data-rh="true" rel="icon" href="/focsipedia2/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bhoward.github.io/focsipedia2/docs/ds/balance"><link data-rh="true" rel="alternate" href="https://bhoward.github.io/focsipedia2/docs/ds/balance" hreflang="en"><link data-rh="true" rel="alternate" href="https://bhoward.github.io/focsipedia2/docs/ds/balance" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YNUYSORFOS-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Balanced Binary Search Trees","item":"https://bhoward.github.io/focsipedia2/docs/ds/balance"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="FoCSipedia" href="/focsipedia2/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="stylesheet" href="/focsipedia2/assets/css/styles.a0092837.css">
<script src="/focsipedia2/assets/js/runtime~main.6438b744.js" defer="defer"></script>
<script src="/focsipedia2/assets/js/main.59db1118.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/focsipedia2/"><div class="navbar__logo"><img src="/focsipedia2/img/SmartFoxIcon.jpeg" alt="Smart Fox Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/focsipedia2/img/SmartFoxIcon.jpeg" alt="Smart Fox Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">FoCSipedia</b></a><a class="navbar__item navbar__link" href="/focsipedia2/docs/236topics">Topics</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/bhoward/focsipedia2/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/attribution"><span title="Course Info" class="categoryLinkLabel_W154">Course Info</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/logic/intro"><span title="Logic" class="categoryLinkLabel_W154">Logic</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/sets/concepts"><span title="Sets" class="categoryLinkLabel_W154">Sets</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/fp/intro"><span title="Functional Programming" class="categoryLinkLabel_W154">Functional Programming</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/focsipedia2/docs/ds/lists"><span title="Lists, Trees, and Graphs" class="categoryLinkLabel_W154">Lists, Trees, and Graphs</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/lists"><span title="Sorting Lists" class="linkLabel_WmDU">Sorting Lists</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/recurrence"><span title="Running Time and Recurrences" class="linkLabel_WmDU">Running Time and Recurrences</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/verification"><span title="Program Verification" class="linkLabel_WmDU">Program Verification</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/trees"><span title="Trees" class="linkLabel_WmDU">Trees</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/bst"><span title="Binary Search Trees and Heaps" class="linkLabel_WmDU">Binary Search Trees and Heaps</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/focsipedia2/docs/ds/balance"><span title="Balanced Binary Search Trees" class="linkLabel_WmDU">Balanced Binary Search Trees</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/graphs"><span title="Graphs" class="linkLabel_WmDU">Graphs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/components"><span title="Connected Components" class="linkLabel_WmDU">Connected Components</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/focsipedia2/docs/ds/paths"><span title="Shortest Paths and Minimum Spanning Trees" class="linkLabel_WmDU">Shortest Paths and Minimum Spanning Trees</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/ds/decrease"><span title="Algorithms" class="categoryLinkLabel_W154">Algorithms</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/lang/languages"><span title="Formal Languages" class="categoryLinkLabel_W154">Formal Languages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/scala"><span title="Features" class="categoryLinkLabel_W154">Features</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/focsipedia2/docs/reason"><span title="Supplementary Topics" class="categoryLinkLabel_W154">Supplementary Topics</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/focsipedia2/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Lists, Trees, and Graphs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Balanced Binary Search Trees</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Balanced Binary Search Trees</h1></header><p>As we saw in the <a href="/focsipedia2/docs/ds/bst">previous section</a>, the height of a binary tree with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span> nodes
can be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span> in the worst case, when no node has more than one child.
This means that the worst-case search time in a binary search tree is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span>, which is
no better than linear search through a linked-list or array.
The point of using a binary search tree is to take advantage of branching to improve on
the search time—every time we choose to go left or right, we would like our search
space to be cut (roughly) in half, which should give us a running time of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span>.</p>
<p>Therefore, when we use a binary search tree we will need to do some work to ensure that it
maintains some sort of <strong>balance</strong>.
We will explore several choices for a precise definition of balance.</p>
<p>One definition that will <em>not</em> work is to require a <strong>perfect</strong> binary tree, where every node
has exactly two children except for the leaves, and all of the leaves are at the same level.
The problem with this balance condition is that it only works for certain numbers of nodes.
Here are perfect binary search trees with 1, 2, and 3 levels:</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="414" height="141" class="img_ev3q"></p>
<p>A perfect binary tree with 4 levels would need 8 more nodes, for a total of 15.
It is easy to see that the number of nodes in a perfect binary tree with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span>
levels is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">\sum_{i=0}^{k-1} 2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2887em;vertical-align:-0.2997em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span>, which is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>.</p>
<p>We could modify this definition to require only that our binary search tree be
<strong>complete</strong>, which is like a perfect tree except the bottom row might be only
partially filled in, with all of its nodes to the left.
Here is an example of a complete binary search tree with 8 nodes:</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="225" height="157" class="img_ev3q"></p>
<p>The number of nodes in a complete binary tree of height <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span> will be between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> and
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>, which is enough to establish our desired bound of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span> on the running time
of search on a complete binary search tree.
However, although complete binary trees are useful for some applications, such as
<a href="/focsipedia2/docs/ds/bst#heaps">heaps</a>, they are not flexible enough to handle binary search tree insertion or
deletion efficiently.
To get some intuition why this is so, compare the trees above with 7 and 8 nodes, and observe
how many nodes would have had to change position just to insert the value &quot;8&quot;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="avl-trees">AVL Trees<a href="#avl-trees" class="hash-link" aria-label="Direct link to AVL Trees" title="Direct link to AVL Trees" translate="no">​</a></h2>
<p>The key to finding a definition of balance that both guarantees <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span> search time and also
efficient insertion and deletion is to allow minor imbalances locally.
As long as we can guarantee that the local imbalance doesn&#x27;t accumulate out of control, this will
give enough flexibility to enable insertions and deletions to only require local modifications to
the tree.
In particular, if the only changes needed to the tree&#x27;s structure are along a single path from the
root, we know that they can only take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span> time (because the maximum path lengths are bounded
by the height, and the balance condition will ensure a logarithmic bound on the height).</p>
<p>The first such balance condition we will look at is for the <strong>AVL Tree</strong>, named after its inventors,
Georgy Adelson-Velsky and Evgenii Landis.
For each node in the tree, we will require that the heights of its children differ by at most one.
That is, if we define the <strong>balance factor</strong> <code>BF(Node(left, value, right))</code> to be
<code>height(right) - height(left)</code>, then the AVL condition says that <code>-1 &lt;= BF(n) &lt;= +1</code> for every node <code>n</code>.</p>
<p>This looser balance condition is enough to guarantee that the height is bounded by the logarithm of the
number of nodes,<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label" class="footnoteRefStickyNavbar_i6ta">1</a></sup> but it is also flexible enough that we can preserve the condition with only minor
adjustments as each value is inserted or deleted.</p>
<p>The key to this obervation is the concept of a <strong>rotation</strong> of a subtree.
Suppose the node <code>n</code> has a left child (<code>L</code>) whose height is one greater than its right child (<code>R</code>).
This means that <code>L</code> is non-empty, so we may decompose it into its root node (<code>l</code>) and children
(<code>ll</code> and <code>lr</code>).</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="287" height="153" class="img_ev3q"></p>
<p>Now we can perform a <strong>right rotation</strong> by moving node <code>l</code> up to the root and pushing <code>n</code> down into
its right child:</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="154" height="153" class="img_ev3q"></p>
<p>This rotation converts a tree with balance factor -1 into one with balance factor +1.
Importantly, note that we have also preserved the binary search tree property, because
all of the values in the subtree <code>ll</code> are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo></mrow><annotation encoding="application/x-tex">\leq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≤</span></span></span></span> the value in node <code>l</code>, the values in
subtree <code>lr</code> are between the values in <code>l</code> and <code>n</code>, and the values in subtree <code>R</code> are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo></mrow><annotation encoding="application/x-tex">\geq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≥</span></span></span></span>
the value in <code>n</code>.
The rotated tree still has the correct relative positioning of all of these values, but we
have &quot;shifted its weight&quot; from the left to the right.
We can also perform a <strong>left rotation</strong> to reverse this operation.</p>
<p>Suppose we have just inserted a value in the left subtree of <code>n</code> that would violate the AVL
balance condition.
There are two cases to consider: either the subtree <code>ll</code> is too tall (the &quot;Left-Left&quot; case) or
the subtree <code>lr</code> is too tall (the &quot;Left-Right&quot; case), depending on which one contains the
new element.</p>
<p>In the Left-Left case, a right rotation as shown above will be enough to fix the AVL condition,
and the new root <code>l</code> will have balance factor 0:</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="388" height="183" class="img_ev3q"></p>
<p>The Left-Right case is slightly more involved, because a single rotation will leave it unbalanced.
However, if we first perform a left rotation on the subtree <code>L</code> we can produce an intermediate tree
that looks like the Left-Left case, so a second rotation (this time to the right) on the full subtree
will fix up the balance:</p>
<p><img decoding="async" loading="lazy" alt="Doodle" src="/focsipedia2/assets/images/leftRight-830a059e132b2446b44aa00dea75e71b.png" width="958" height="184" class="img_ev3q"></p>
<p>We may check that the resulting height of the tree after these modifications is the same as it was
before the insertion, so the balance condition further up in the tree will not need further repair.
Of course, if the AVL balance condition were violated by insertion in a right child, we would fix it
by considering analogous Right-Right and Right-Left cases and performing rotations the other direction.</p>
<p>Here is Scala code that implements AVL tree insertion.
As an optimization, we have added a <code>height</code> field to each <code>Tree</code> object, which is computed
and saved when the leaf or node is constructed; this avoids multiple traversals of the tree
to recompute the heights when checking the balance condition.</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">object</span><span class="token plain"> AVLTree </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Empty </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height max right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Empty </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Empty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> value then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Empty </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> BF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> BF </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ll</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> lr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height then </span><span class="token comment" style="color:#999988;font-style:italic">// Left-Left</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Left-Right</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> BF </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> right</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> rl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height then </span><span class="token comment" style="color:#999988;font-style:italic">// Right-Right</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Right-Left</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">val</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// BF is in valid range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Finally, here is the result of inserting the numbers 1 to 20, in order, into an initially empty AVL tree:
<img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="515" height="188" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="red-black-trees">Red-Black Trees<a href="#red-black-trees" class="hash-link" aria-label="Direct link to Red-Black Trees" title="Direct link to Red-Black Trees" translate="no">​</a></h2>
<p>TODO</p>
<p>Here is Scala code that implements Red-Black tree insertion:</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">object</span><span class="token plain"> RedBlackTree </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> Color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Red</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Black</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> Tree</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Color</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> aux</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      t </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Empty </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        then balance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> aux</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> aux</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> llv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> llv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lrv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lrv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rlv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rlv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rrv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rrv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> _ </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> makeBlack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Tree </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      t </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Red</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Black</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> _ </span><span class="token keyword" style="color:#00009f">=&gt;</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    makeBlack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aux</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Here is the result of inserting the numbers 1 to 20, in order, into an initially empty Red-Black tree:
<img decoding="async" loading="lazy" alt="Doodle" src="data:image/png;base64,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" width="516" height="219" class="img_ev3q"></p>
<p>TODO show the colors...</p>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes" translate="no">​</a></h2>
<ol>
<li id="user-content-fn-1">
<p>Interestingly, we can show that the minimum number of nodes in an AVL tree of height <code>h</code> is
proportional to the Fibonacci number <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>h</mi></msub></mrow><annotation encoding="application/x-tex">F_h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span>. This should make sense, because the most unbalanced case
is when one child has height <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">h-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span> and the other has height <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">h-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span>, so the recurrence for the total
number of nodes looks like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo><mo>=</mo><mi>N</mi><mo stretchy="false">(</mo><mi>h</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>N</mi><mo stretchy="false">(</mo><mi>h</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N(h) = N(h-1) + N(h-2) + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>. Since the Fibonacci numbers grow exponentially,
with growth factor <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi><mo>=</mo><mn>1.618</mn><mo>…</mo></mrow><annotation encoding="application/x-tex">\varphi=1.618\ldots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">φ</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1.618</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span></span></span></span> (the Golden Ratio), we can see that the height of an AVL tree
with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span> nodes is at most <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>φ</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">\log_\varphi N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0747em;vertical-align:-0.3802em"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">φ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span>. <a href="#user-content-fnref-1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/bhoward/focsipedia2/edit/main/docs/ds/balance.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/focsipedia2/docs/ds/bst"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Binary Search Trees and Heaps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/focsipedia2/docs/ds/graphs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Graphs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#avl-trees" class="table-of-contents__link toc-highlight">AVL Trees</a></li><li><a href="#red-black-trees" class="table-of-contents__link toc-highlight">Red-Black Trees</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/focsipedia2/docs/policies">Policies</a></li><li class="footer__item"><a class="footer__link-item" href="/focsipedia2/docs/attribution">Attribution</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/bhoward/focsipedia2/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 <a href="https://github.com/bhoward">Brian T. Howard</a>. Built with <a href="https://docusaurus.io/">Docusaurus</a>. <a href="https://purl.org/focsipedia">FoCSipedia</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt=""></a></div></div></div></footer></div>
</body>
</html>